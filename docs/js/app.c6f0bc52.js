(function(e){function t(t){for(var s,a,i=t[0],c=t[1],l=t[2],p=0,f=[];p<i.length;p++)a=i[p],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&f.push(o[a][0]),o[a]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(e[s]=c[s]);u&&u(t);while(f.length)f.shift()();return r.push.apply(r,l||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],s=!0,i=1;i<n.length;i++){var c=n[i];0!==o[c]&&(s=!1)}s&&(r.splice(t--,1),e=a(a.s=n[0]))}return e}var s={},o={app:0},r=[];function a(t){if(s[t])return s[t].exports;var n=s[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=s,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)a.d(n,s,function(t){return e[t]}.bind(null,s));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=t,i=i.slice();for(var l=0;l<i.length;l++)t(i[l]);var u=c;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},"034f":function(e,t,n){"use strict";var s=n("7688"),o=n.n(s);o.a},"2d5a":function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id="2d5a"},"67ad":function(e,t,n){"use strict";var s=n("6ea9"),o=n.n(s);o.a},"6ea9":function(e,t,n){},7688:function(e,t,n){},bb3e:function(e,t,n){},cd49:function(e,t,n){"use strict";n.r(t);var s=n("b355"),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container-fluid",attrs:{id:"app"}},[n("div",{staticClass:"row"},[n("Dialog")],1)])},r=[],a=n("3732"),i=n("9153"),c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"col-xs-12"},[n("div",{staticClass:"row line"},[n("form",{staticClass:"form-inline",attrs:{onsubmit:"return false"}},[n("div",{staticClass:"form-group"},[n("label",{attrs:{for:"peerIdInput"}},[e._v("Peer ID:")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.selfPeerId,expression:"selfPeerId"}],staticClass:"form-control",attrs:{id:"peerIdInput",type:"text",readonly:""},domProps:{value:e.selfPeerId},on:{input:function(t){t.target.composing||(e.selfPeerId=t.target.value)}}})]),e._v(" "),e.selfPeerId?n("button",{staticClass:"btn btn-default",attrs:{id:"copySelfPeerId"}},[e._v("copy")]):e._e()])]),n("div",{staticClass:"row line"},[n("form",{staticClass:"form-inline",attrs:{onsubmit:"return false"}},[n("div",{staticClass:"form-group"},[n("label",{attrs:{for:"friendPeerIdInput"}},[e._v("Friend peer ID:")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.friendPeerId,expression:"friendPeerId"}],staticClass:"form-control",attrs:{id:"friendPeerIdInput"},domProps:{value:e.friendPeerId},on:{input:function(t){t.target.composing||(e.friendPeerId=t.target.value)}}})]),e._v(" "),e.selfPeerId?n("input",{staticClass:"btn btn-default",attrs:{type:"button",value:"connect"},on:{click:e.connectPeer}}):e._e()])]),n("div",{staticClass:"row line"},[n("label",{staticStyle:{margin:"0"}},[e._v("Status: ")]),n("span",[e._v(e._s(e.status))])]),n("div",{staticClass:"row line"},[n("div",{staticClass:"col-xs-12",attrs:{id:"messagesContainer"}},e._l(e.messageList,(function(t,s){return n("p",{key:s,staticClass:"message"},[n("span",{staticClass:"messageName"},[e._v(e._s(t.name))]),e._v(": "),"img"===t.type?[n("br"),n("img",{staticClass:"messageImage",attrs:{src:t.content},on:{load:e.onImageLoad}})]:[n("span",{staticClass:"messageText"},[e._v(e._s(t.content))])]],2)})),0)]),n("div",{staticClass:"row line"},[n("input",{staticClass:"btn btn-default",attrs:{type:"button",value:"image"},on:{click:e.selectImages}})]),n("div",{staticClass:"row line"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.message,expression:"message"}],staticClass:"form-control col-xs-12",attrs:{cols:"45",rows:"4"},domProps:{value:e.message},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:t.ctrlKey?t.shiftKey||t.altKey||t.metaKey?null:(t.stopPropagation(),e.sendMessage(t)):null},input:function(t){t.target.composing||(e.message=t.target.value)}}})]),n("div",{staticClass:"row line"},[n("input",{staticClass:"btn btn-default",attrs:{type:"button",value:"send"},on:{click:e.sendMessage}})]),n("input",{attrs:{type:"file",id:"imageInput",multiple:""},on:{change:e.sendImages}})])},l=[],u=n("5f3e"),p=n.n(u),f=n("90bb"),d=n.n(f),m=n("df16"),g=n.n(m),v=function(){function e(e,t,n){this.type=e,this.name=t,this.content=n}return e}(),b=function(e){function t(){var t=e.call(this)||this;return t.friendPeerId="",t.selfPeerId="",t.status="getting peer ID...",t.message="",t.messageList=[],t.clipboard=new g.a("#copySelfPeerId",{text:function(e){return t.selfPeerId}}),t.peer=new d.a,t.peer.on("open",t.onPeerOpen),t.peer.on("connection",t.onPeerConnection),t}return Object(a["b"])(t,e),t.prototype.onPeerOpen=function(e){this.selfPeerId=e,this.status="online"},t.prototype.onPeerConnection=function(e){this.conn=e,e.on("open",this.onConnOpen),e.on("close",this.onConnClose),e.on("data",this.onConnData)},t.prototype.onConnOpen=function(){this.friendPeerId=this.conn.peer,this.status="connected"},t.prototype.onConnClose=function(){this.status="disconnected"},t.prototype.onConnData=function(e){if("img"===e.type){var t=new Blob([e.content],{type:e.fileType}),n=URL.createObjectURL(t);this.messageList.push(new v("img","friend",n))}else this.messageList.push(new v("text","friend",e.content))},t.prototype.connectPeer=function(){this.status="connecting...",this.onPeerConnection(this.peer.connect(this.friendPeerId))},t.prototype.sendMessage=function(){this.messageList.push(new v("text","me",this.message)),this.conn.send({type:"text",content:this.message}),this.message=""},t.prototype.sendImages=function(e){var t=e.target;if(null!=t.files)for(var n=this.conn,s=function(e){var s=t.files[e],r=URL.createObjectURL(s);o.messageList.push(new v("img","me",r));var a=new FileReader;a.onload=function(e){null!=e.target&&n.send({type:"img",content:e.target.result,fileType:s.type})},a.readAsArrayBuffer(s)},o=this,r=0;r<t.files.length;++r)s(r)},t.prototype.onImageLoad=function(e){var t=e.target.src;t.startsWith("blob:")&&window.URL.revokeObjectURL(t)},t.prototype.selectImages=function(){p()("#imageInput").click()},t.prototype.scrollBottom=function(){p()("#messagesContainer").scrollTop(p()("#messagesContainer")[0].scrollHeight)},t.prototype.onMessageListChanged=function(e,t){setTimeout(this.scrollBottom,0)},Object(a["a"])([Object(i["c"])("messageList")],t.prototype,"onMessageListChanged",null),t=Object(a["a"])([i["a"]],t),t}(i["b"]),y=b,h=y,C=(n("67ad"),n("df5e")),P=Object(C["a"])(h,c,l,!1,null,"0f3c6a9c",null),I=P.exports,w=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(a["b"])(t,e),t=Object(a["a"])([Object(i["a"])({components:{Dialog:I}})],t),t}(i["b"]),O=w,_=O,x=(n("034f"),Object(C["a"])(_,o,r,!1,null,null,null)),j=x.exports;n("bb3e"),n("dc2b"),n("5039"),n("2443");s["a"].config.productionTip=!1,new s["a"]({render:function(e){return e(j)}}).$mount("#app")}});